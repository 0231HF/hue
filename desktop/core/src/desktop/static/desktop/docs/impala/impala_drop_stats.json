{"body":"<div><p>\n      Removes the specified statistics from a table or partition. The statistics were originally created by the\n      <span class=\"sql-docs-inline-code\">COMPUTE STATS</span> or <span class=\"sql-docs-inline-code\">COMPUTE INCREMENTAL STATS</span> statement.\n    </p><p id=\"../Impala/docs/topics/impala_drop_stats.xml_syntax_blurb\"><b>Syntax:</b></p><div class=\"sql-docs-code-block\">DROP STATS [<span class=\"sql-docs-variable\">database_name</span>.]<span class=\"sql-docs-variable\">table_name</span><br/>DROP INCREMENTAL STATS [<span class=\"sql-docs-variable\">database_name</span>.]<span class=\"sql-docs-variable\">table_name</span> PARTITION (<span class=\"sql-docs-variable\">partition_spec</span>)<br/><br/><span class=\"sql-docs-variable\">partition_spec</span> ::= <span class=\"sql-docs-variable\">partition_col</span>=<span class=\"sql-docs-variable\">constant_value</span></div><p id=\"../Impala/docs/topics/impala_drop_stats.xml_incremental_partition_spec\">\n        The <span class=\"sql-docs-inline-code\">PARTITION</span> clause is only allowed in combination with the <span class=\"sql-docs-inline-code\">INCREMENTAL</span>\n        clause. It is optional for <span class=\"sql-docs-inline-code\">COMPUTE INCREMENTAL STATS</span>, and required for <span class=\"sql-docs-inline-code\">DROP\n        INCREMENTAL STATS</span>. Whenever you specify partitions through the <span class=\"sql-docs-inline-code\">PARTITION\n        (<span class=\"sql-docs-variable\">partition_spec</span>)</span> clause in a <span class=\"sql-docs-inline-code\">COMPUTE INCREMENTAL STATS</span> or\n        <span class=\"sql-docs-inline-code\">DROP INCREMENTAL STATS</span> statement, you must include all the partitioning columns in the\n        specification, and specify constant values for all the partition key columns.\n      </p><p><span class=\"sql-docs-inline-code\">DROP STATS</span> removes all statistics from the table, whether created by <span class=\"sql-docs-inline-code\">COMPUTE\n      STATS</span> or <span class=\"sql-docs-inline-code\">COMPUTE INCREMENTAL STATS</span>.\n    </p><p><span class=\"sql-docs-inline-code\">DROP INCREMENTAL STATS</span> only affects incremental statistics for a single partition, specified\n      through the <span class=\"sql-docs-inline-code\">PARTITION</span> clause. The incremental stats are marked as outdated, so that they are\n      recomputed by the next <span class=\"sql-docs-inline-code\">COMPUTE INCREMENTAL STATS</span> statement.\n    </p><p id=\"../Impala/docs/topics/impala_drop_stats.xml_usage_notes_blurb\"><b>Usage notes:</b></p><p>\n      You typically use this statement when the statistics for a table or a partition have become stale due to data\n      files being added to or removed from the associated HDFS data directories, whether by manual HDFS operations\n      or <span class=\"sql-docs-inline-code\">INSERT</span>, <span class=\"sql-docs-inline-code\">INSERT OVERWRITE</span>, or <span class=\"sql-docs-inline-code\">LOAD DATA</span> statements, or\n      adding or dropping partitions.\n    </p><p>\n      When a table or partition has no associated statistics, Impala treats it as essentially zero-sized when\n      constructing the execution plan for a query. In particular, the statistics influence the order in which\n      tables are joined in a join query. To ensure proper query planning and good query performance and\n      scalability, make sure to run <span class=\"sql-docs-inline-code\">COMPUTE STATS</span> or <span class=\"sql-docs-inline-code\">COMPUTE INCREMENTAL STATS</span> on\n      the table or partition after removing any stale statistics.\n    </p><p>\n      Dropping the statistics is not required for an unpartitioned table or a partitioned table covered by the\n      original type of statistics. A subsequent <span class=\"sql-docs-inline-code\">COMPUTE STATS</span> statement replaces any existing\n      statistics with new ones, for all partitions, regardless of whether the old ones were outdated. Therefore,\n      this statement was rarely used before the introduction of incremental statistics.\n    </p><p>\n      Dropping the statistics is required for a partitioned table containing incremental statistics, to make a\n      subsequent <span class=\"sql-docs-inline-code\">COMPUTE INCREMENTAL STATS</span> statement rescan an existing partition. See\n      <span>perf stats</span> for information about incremental statistics, a new feature\n      available in Impala 2.1.0 and higher.\n    </p><p id=\"../Impala/docs/topics/impala_drop_stats.xml_ddl_blurb\"><b>Statement type:</b> DDL\n      </p><p id=\"../Impala/docs/topics/impala_drop_stats.xml_cancel_blurb_no\"><b>Cancellation:</b> Cannot be cancelled.\n      </p><p id=\"../Impala/docs/topics/impala_drop_stats.xml_permissions_blurb\"><b>HDFS permissions:</b></p><p>\n      The user ID that the <span class=\"sql-docs-inline-code\">impalad</span> daemon runs under,\n      typically the <span class=\"sql-docs-inline-code\">impala</span> user, does not need any\n      particular HDFS permissions to perform this statement.\n      All read and write operations are on the metastore database,\n      not HDFS files and directories.\n    </p><p id=\"../Impala/docs/topics/impala_drop_stats.xml_example_blurb\"><b>Examples:</b></p><p>\n      The following example shows a partitioned table that has associated statistics produced by the\n      <span class=\"sql-docs-inline-code\">COMPUTE INCREMENTAL STATS</span> statement, and how the situation evolves as statistics are dropped\n      from specific partitions, then the entire table.\n    </p><p>\n      Initially, all table and column statistics are filled in.\n    </p><div class=\"sql-docs-code-block\">show table stats item_partitioned;<br/>+-------------+-------+--------+----------+--------------+---------+-----------------<br/>| i_category  | #Rows | #Files | Size     | Bytes Cached | Format  | Incremental stats<br/>+-------------+-------+--------+----------+--------------+---------+-----------------<br/>| Books       | 1733  | 1      | 223.74KB | NOT CACHED   | PARQUET | true<br/>| Children    | 1786  | 1      | 230.05KB | NOT CACHED   | PARQUET | true<br/>| Electronics | 1812  | 1      | 232.67KB | NOT CACHED   | PARQUET | true<br/>| Home        | 1807  | 1      | 232.56KB | NOT CACHED   | PARQUET | true<br/>| Jewelry     | 1740  | 1      | 223.72KB | NOT CACHED   | PARQUET | true<br/>| Men         | 1811  | 1      | 231.25KB | NOT CACHED   | PARQUET | true<br/>| Music       | 1860  | 1      | 237.90KB | NOT CACHED   | PARQUET | true<br/>| Shoes       | 1835  | 1      | 234.90KB | NOT CACHED   | PARQUET | true<br/>| Sports      | 1783  | 1      | 227.97KB | NOT CACHED   | PARQUET | true<br/>| Women       | 1790  | 1      | 226.27KB | NOT CACHED   | PARQUET | true<br/>| Total       | 17957 | 10     | 2.25MB   | 0B           |         |<br/>+-------------+-------+--------+----------+--------------+---------+-----------------<br/>show column stats item_partitioned;<br/>+------------------+-----------+------------------+--------+----------+--------------<br/>| Column           | Type      | #Distinct Values | #Nulls | Max Size | Avg Size<br/>+------------------+-----------+------------------+--------+----------+--------------<br/>| i_item_sk        | INT       | 19443            | -1     | 4        | 4<br/>| i_item_id        | STRING    | 9025             | -1     | 16       | 16<br/>| i_rec_start_date | TIMESTAMP | 4                | -1     | 16       | 16<br/>| i_rec_end_date   | TIMESTAMP | 3                | -1     | 16       | 16<br/>| i_item_desc      | STRING    | 13330            | -1     | 200      | 100.302803039<br/>| i_current_price  | FLOAT     | 2807             | -1     | 4        | 4<br/>| i_wholesale_cost | FLOAT     | 2105             | -1     | 4        | 4<br/>| i_brand_id       | INT       | 965              | -1     | 4        | 4<br/>| i_brand          | STRING    | 725              | -1     | 22       | 16.1776008605<br/>| i_class_id       | INT       | 16               | -1     | 4        | 4<br/>| i_class          | STRING    | 101              | -1     | 15       | 7.76749992370<br/>| i_category_id    | INT       | 10               | -1     | 4        | 4<br/>| i_manufact_id    | INT       | 1857             | -1     | 4        | 4<br/>| i_manufact       | STRING    | 1028             | -1     | 15       | 11.3295001983<br/>| i_size           | STRING    | 8                | -1     | 11       | 4.33459997177<br/>| i_formulation    | STRING    | 12884            | -1     | 20       | 19.9799995422<br/>| i_color          | STRING    | 92               | -1     | 10       | 5.38089990615<br/>| i_units          | STRING    | 22               | -1     | 7        | 4.18690013885<br/>| i_container      | STRING    | 2                | -1     | 7        | 6.99259996414<br/>| i_manager_id     | INT       | 105              | -1     | 4        | 4<br/>| i_product_name   | STRING    | 19094            | -1     | 25       | 18.0233001708<br/>| i_category       | STRING    | 10               | 0      | -1       | -1<br/>+------------------+-----------+------------------+--------+----------+--------------<br/></div><p>\n      To remove statistics for particular partitions, use the <span class=\"sql-docs-inline-code\">DROP INCREMENTAL STATS</span> statement.\n      After removing statistics for two partitions, the table-level statistics reflect that change in the\n      <span class=\"sql-docs-inline-code\">#Rows</span> and <span class=\"sql-docs-inline-code\">Incremental stats</span> fields. The counts, maximums, and averages of\n      the column-level statistics are unaffected.\n    </p><div class=\"sql-docs-note\">\n      (It is possible that the row count might be preserved in future after a <span class=\"sql-docs-inline-code\">DROP INCREMENTAL\n      STATS</span> statement. Check the resolution of the issue\n      .)\n    </div><div class=\"sql-docs-code-block\">drop incremental stats item_partitioned partition (i_category='Sports');<br/>drop incremental stats item_partitioned partition (i_category='Electronics');<br/><br/>show table stats item_partitioned<br/>+-------------+-------+--------+----------+--------------+---------+------------------<br/>| i_category  | #Rows | #Files | Size     | Bytes Cached | Format  | Incremental stats<br/>+-------------+-------+--------+----------+--------------+---------+-----------------<br/>| Books       | 1733  | 1      | 223.74KB | NOT CACHED   | PARQUET | true<br/>| Children    | 1786  | 1      | 230.05KB | NOT CACHED   | PARQUET | true<br/>| Electronics | -1    | 1      | 232.67KB | NOT CACHED   | PARQUET | false<br/>| Home        | 1807  | 1      | 232.56KB | NOT CACHED   | PARQUET | true<br/>| Jewelry     | 1740  | 1      | 223.72KB | NOT CACHED   | PARQUET | true<br/>| Men         | 1811  | 1      | 231.25KB | NOT CACHED   | PARQUET | true<br/>| Music       | 1860  | 1      | 237.90KB | NOT CACHED   | PARQUET | true<br/>| Shoes       | 1835  | 1      | 234.90KB | NOT CACHED   | PARQUET | true<br/>| Sports      | -1    | 1      | 227.97KB | NOT CACHED   | PARQUET | false<br/>| Women       | 1790  | 1      | 226.27KB | NOT CACHED   | PARQUET | true<br/>| Total       | 17957 | 10     | 2.25MB   | 0B           |         |<br/>+-------------+-------+--------+----------+--------------+---------+-----------------<br/>show column stats item_partitioned<br/>+------------------+-----------+------------------+--------+----------+--------------<br/>| Column           | Type      | #Distinct Values | #Nulls | Max Size | Avg Size<br/>+------------------+-----------+------------------+--------+----------+--------------<br/>| i_item_sk        | INT       | 19443            | -1     | 4        | 4<br/>| i_item_id        | STRING    | 9025             | -1     | 16       | 16<br/>| i_rec_start_date | TIMESTAMP | 4                | -1     | 16       | 16<br/>| i_rec_end_date   | TIMESTAMP | 3                | -1     | 16       | 16<br/>| i_item_desc      | STRING    | 13330            | -1     | 200      | 100.302803039<br/>| i_current_price  | FLOAT     | 2807             | -1     | 4        | 4<br/>| i_wholesale_cost | FLOAT     | 2105             | -1     | 4        | 4<br/>| i_brand_id       | INT       | 965              | -1     | 4        | 4<br/>| i_brand          | STRING    | 725              | -1     | 22       | 16.1776008605<br/>| i_class_id       | INT       | 16               | -1     | 4        | 4<br/>| i_class          | STRING    | 101              | -1     | 15       | 7.76749992370<br/>| i_category_id    | INT       | 10               | -1     | 4        | 4<br/>| i_manufact_id    | INT       | 1857             | -1     | 4        | 4<br/>| i_manufact       | STRING    | 1028             | -1     | 15       | 11.3295001983<br/>| i_size           | STRING    | 8                | -1     | 11       | 4.33459997177<br/>| i_formulation    | STRING    | 12884            | -1     | 20       | 19.9799995422<br/>| i_color          | STRING    | 92               | -1     | 10       | 5.38089990615<br/>| i_units          | STRING    | 22               | -1     | 7        | 4.18690013885<br/>| i_container      | STRING    | 2                | -1     | 7        | 6.99259996414<br/>| i_manager_id     | INT       | 105              | -1     | 4        | 4<br/>| i_product_name   | STRING    | 19094            | -1     | 25       | 18.0233001708<br/>| i_category       | STRING    | 10               | 0      | -1       | -1<br/>+------------------+-----------+------------------+--------+----------+--------------<br/></div><p>\n      To remove all statistics from the table, whether produced by <span class=\"sql-docs-inline-code\">COMPUTE STATS</span> or\n      <span class=\"sql-docs-inline-code\">COMPUTE INCREMENTAL STATS</span>, use the <span class=\"sql-docs-inline-code\">DROP STATS</span> statement without the\n      <span class=\"sql-docs-inline-code\">INCREMENTAL</span> clause). Now, both table-level and column-level statistics are reset.\n    </p><div class=\"sql-docs-code-block\">drop stats item_partitioned;<br/><br/>show table stats item_partitioned<br/>+-------------+-------+--------+----------+--------------+---------+------------------<br/>| i_category  | #Rows | #Files | Size     | Bytes Cached | Format  | Incremental stats<br/>+-------------+-------+--------+----------+--------------+---------+------------------<br/>| Books       | -1    | 1      | 223.74KB | NOT CACHED   | PARQUET | false<br/>| Children    | -1    | 1      | 230.05KB | NOT CACHED   | PARQUET | false<br/>| Electronics | -1    | 1      | 232.67KB | NOT CACHED   | PARQUET | false<br/>| Home        | -1    | 1      | 232.56KB | NOT CACHED   | PARQUET | false<br/>| Jewelry     | -1    | 1      | 223.72KB | NOT CACHED   | PARQUET | false<br/>| Men         | -1    | 1      | 231.25KB | NOT CACHED   | PARQUET | false<br/>| Music       | -1    | 1      | 237.90KB | NOT CACHED   | PARQUET | false<br/>| Shoes       | -1    | 1      | 234.90KB | NOT CACHED   | PARQUET | false<br/>| Sports      | -1    | 1      | 227.97KB | NOT CACHED   | PARQUET | false<br/>| Women       | -1    | 1      | 226.27KB | NOT CACHED   | PARQUET | false<br/>| Total       | -1    | 10     | 2.25MB   | 0B           |         |<br/>+-------------+-------+--------+----------+--------------+---------+------------------<br/>show column stats item_partitioned<br/>+------------------+-----------+------------------+--------+----------+----------+<br/>| Column           | Type      | #Distinct Values | #Nulls | Max Size | Avg Size |<br/>+------------------+-----------+------------------+--------+----------+----------+<br/>| i_item_sk        | INT       | -1               | -1     | 4        | 4        |<br/>| i_item_id        | STRING    | -1               | -1     | -1       | -1       |<br/>| i_rec_start_date | TIMESTAMP | -1               | -1     | 16       | 16       |<br/>| i_rec_end_date   | TIMESTAMP | -1               | -1     | 16       | 16       |<br/>| i_item_desc      | STRING    | -1               | -1     | -1       | -1       |<br/>| i_current_price  | FLOAT     | -1               | -1     | 4        | 4        |<br/>| i_wholesale_cost | FLOAT     | -1               | -1     | 4        | 4        |<br/>| i_brand_id       | INT       | -1               | -1     | 4        | 4        |<br/>| i_brand          | STRING    | -1               | -1     | -1       | -1       |<br/>| i_class_id       | INT       | -1               | -1     | 4        | 4        |<br/>| i_class          | STRING    | -1               | -1     | -1       | -1       |<br/>| i_category_id    | INT       | -1               | -1     | 4        | 4        |<br/>| i_manufact_id    | INT       | -1               | -1     | 4        | 4        |<br/>| i_manufact       | STRING    | -1               | -1     | -1       | -1       |<br/>| i_size           | STRING    | -1               | -1     | -1       | -1       |<br/>| i_formulation    | STRING    | -1               | -1     | -1       | -1       |<br/>| i_color          | STRING    | -1               | -1     | -1       | -1       |<br/>| i_units          | STRING    | -1               | -1     | -1       | -1       |<br/>| i_container      | STRING    | -1               | -1     | -1       | -1       |<br/>| i_manager_id     | INT       | -1               | -1     | 4        | 4        |<br/>| i_product_name   | STRING    | -1               | -1     | -1       | -1       |<br/>| i_category       | STRING    | 10               | 0      | -1       | -1       |<br/>+------------------+-----------+------------------+--------+----------+----------+<br/></div><p id=\"../Impala/docs/topics/impala_drop_stats.xml_related_info\"><b>Related information:</b></p><p><a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_compute_stats.xml#compute_stats\">COMPUTE STATS Statement</a>, <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_show.xml#show_table_stats\"><h4>SHOW TABLE STATS Statement</h4></a>,\n      <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_show.xml#show_column_stats\"><h4>SHOW COLUMN STATS Statement</h4></a>, <span>perf stats</span></p></div>","title":"DROP STATS Statement"}