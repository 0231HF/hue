{"body":"<div><p>\n      Creates a new database.\n    </p> <p>\n      In Impala, a database is both:\n    </p> <ul><li>\n        A logical construct for grouping together related tables, views, and functions within their own namespace.\n        You might use a separate database for each application, set of related tables, or round of experimentation.\n      </li> <li>\n        A physical construct represented by a directory tree in HDFS. Tables (internal tables), partitions, and\n        data files are all located under this directory. You can perform HDFS-level operations such as backing it up and measuring space usage,\n        or remove it with a <span class=\"sql-docs-inline-code\">DROP DATABASE</span>  statement.\n      </li> </ul> <p id=\"../Impala/docs/topics/impala_create_database.xml_syntax_blurb\"><b>Syntax:</b> </p> <div class=\"sql-docs-code-block\">CREATE (DATABASE|SCHEMA) [IF NOT EXISTS] <span class=\"sql-docs-variable\">database_name</span> [COMMENT '<span class=\"sql-docs-variable\">database_comment</span> ']<br/>  [LOCATION <span class=\"sql-docs-variable\">hdfs_path</span> ];</div><p id=\"../Impala/docs/topics/impala_create_database.xml_ddl_blurb\"><b>Statement type:</b>  DDL\n      </p> <p id=\"../Impala/docs/topics/impala_create_database.xml_usage_notes_blurb\"><b>Usage notes:</b> </p> <p>\n      A database is physically represented as a directory in HDFS, with a filename extension <span class=\"sql-docs-inline-code\">.db</span> ,\n      under the main Impala data directory. If the associated HDFS directory does not exist, it is created for you.\n      All databases and their associated directories are top-level objects, with no physical or logical nesting.\n    </p> <p>\n      After creating a database, to make it the current database within an <span class=\"sql-docs-inline-code\">impala-shell</span>  session,\n      use the <span class=\"sql-docs-inline-code\">USE</span>  statement. You can refer to tables in the current database without prepending\n      any qualifier to their names.\n    </p> <p>\n      When you first connect to Impala through <span class=\"sql-docs-inline-code\">impala-shell</span> , the database you start in (before\n      issuing any <span class=\"sql-docs-inline-code\">CREATE DATABASE</span>  or <span class=\"sql-docs-inline-code\">USE</span>  statements) is named\n      <span class=\"sql-docs-inline-code\">default</span> .\n    </p> <p id=\"../Impala/docs/topics/impala_create_database.xml_builtins_db\">\n        Impala includes another predefined database, <span class=\"sql-docs-inline-code\">_impala_builtins</span> , that serves as the location\n        for the <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_functions.xml#builtins\">built-in functions</a>. To see the built-in\n        functions, use a statement like the following:\n<div class=\"sql-docs-code-block\">show functions in _impala_builtins;<br/>show functions in _impala_builtins like '*<span class=\"sql-docs-variable\">substring</span> *';<br/></div></p> <p>\n      After creating a database, your <span class=\"sql-docs-inline-code\">impala-shell</span>  session or another\n      <span class=\"sql-docs-inline-code\">impala-shell</span>  connected to the same node can immediately access that database. To access\n      the database through the Impala daemon on a different node, issue the <span class=\"sql-docs-inline-code\">INVALIDATE METADATA</span> \n      statement first while connected to that other node.\n    </p> <p>\n      Setting the <span class=\"sql-docs-inline-code\">LOCATION</span>  attribute for a new database is a way to work with sets of files in an\n      HDFS directory structure outside the default Impala data directory, as opposed to setting the\n      <span class=\"sql-docs-inline-code\">LOCATION</span>  attribute for each individual table.\n    </p> <p id=\"../Impala/docs/topics/impala_create_database.xml_sync_ddl_blurb\">\n        If you connect to different Impala nodes within an <span class=\"sql-docs-inline-code\">impala-shell</span>  session for\n        load-balancing purposes, you can enable the <span class=\"sql-docs-inline-code\">SYNC_DDL</span>  query option to make each DDL\n        statement wait before returning, until the new or changed metadata has been received by all the Impala\n        nodes. See <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_sync_ddl.xml#sync_ddl\">SYNC_DDL Query Option</a> for details.\n      </p> <p id=\"../Impala/docs/topics/impala_create_database.xml_hive_blurb\"><b>Hive considerations:</b> </p> <p>\n      When you create a database in Impala, the database can also be used by Hive.\n      When you create a database in Hive, issue an <span class=\"sql-docs-inline-code\">INVALIDATE METADATA</span> \n      statement in Impala to make Impala permanently aware of the new database.\n    </p> <p>\n      The <span class=\"sql-docs-inline-code\">SHOW DATABASES</span>  statement lists all databases, or the databases whose name\n      matches a wildcard pattern. <span class=\"sql-docs-inline-code\">In Impala 2.5 and higher, the\n      <span class=\"sql-docs-inline-code\">SHOW DATABASES</span>  output includes a second column that displays the associated\n      comment, if any, for each database.</span> </p> <p id=\"../Impala/docs/topics/impala_create_database.xml_s3_blurb\"><b>Amazon S3 considerations:</b> </p> <p>\n      To specify that any tables created within a database reside on the Amazon S3 system,\n      you can include an <span class=\"sql-docs-inline-code\">s3a://</span>  prefix on the <span class=\"sql-docs-inline-code\">LOCATION</span> \n      attribute. In Impala 2.6 and higher, Impala automatically creates any\n      required folders as the databases, tables, and partitions are created, and removes\n      them when they are dropped.\n    </p> <p id=\"../Impala/docs/topics/impala_create_database.xml_s3_ddl\">\n        In Impala 2.6 and higher, Impala DDL statements such as\n        <span class=\"sql-docs-inline-code\">CREATE DATABASE</span> , <span class=\"sql-docs-inline-code\">CREATE TABLE</span> , <span class=\"sql-docs-inline-code\">DROP DATABASE CASCADE</span> ,\n        <span class=\"sql-docs-inline-code\">DROP TABLE</span> , and <span class=\"sql-docs-inline-code\">ALTER TABLE [ADD|DROP] PARTITION</span>  can create or remove folders\n        as needed in the Amazon S3 system. Prior to Impala 2.6, you had to create folders yourself and point\n        Impala database, tables, or partitions at them, and manually remove folders when no longer needed.\n        See <span>s3</span> for details about reading and writing S3 data with Impala.\n      </p> <p id=\"../Impala/docs/topics/impala_create_database.xml_cancel_blurb_no\"><b>Cancellation:</b>  Cannot be cancelled.\n      </p> <p id=\"../Impala/docs/topics/impala_create_database.xml_permissions_blurb\"><b>HDFS permissions:</b> </p> <p>\n      The user ID that the <span class=\"sql-docs-inline-code\">impalad</span>  daemon runs under,\n      typically the <span class=\"sql-docs-inline-code\">impala</span>  user, must have write\n      permission for the parent HDFS directory under which the database\n      is located.\n    </p> <p id=\"../Impala/docs/topics/impala_create_database.xml_example_blurb\"><b>Examples:</b> </p> <div id=\"../Impala/docs/topics/impala_create_database.xml_create_drop_db_example\" class=\"sql-docs-code-block\">create database first_db;<br/>use first_db;<br/>create table t1 (x int);<br/><br/>create database second_db;<br/>use second_db;<br/>-- Each database has its own namespace for tables.<br/>-- You can reuse the same table names in each database.<br/>create table t1 (s string);<br/><br/>create database temp;<br/><br/>-- You can either USE a database after creating it,<br/>-- or qualify all references to the table name with the name of the database.<br/>-- Here, tables T2 and T3 are both created in the TEMP database.<br/><br/>create table temp.t2 (x int, y int);<br/>use database temp;<br/>create table t3 (s string);<br/><br/>-- You cannot drop a database while it is selected by the USE statement.<br/>drop database temp;<br/><i>ERROR: AnalysisException: Cannot drop current default database: temp</i> -- The always-available database 'default' is a convenient one to USE<br/>-- before dropping a database you created.<br/>use default;<br/><br/>-- Before dropping a database, first drop all the tables inside it,<br/><span class=\"sql-docs-inline-code\">-- or in Impala 2.3and higher use the CASCADE clause.</span> drop database temp;<br/>ERROR: ImpalaRuntimeException: Error making 'dropDatabase' RPC to Hive Metastore:<br/>CAUSED BY: InvalidOperationException: Database temp is not empty<br/>show tables in temp;<br/>+------+<br/>| name |<br/>+------+<br/>| t3   |<br/>+------+<br/><br/><span class=\"sql-docs-inline-code\">-- Impala 2.3and higher:</span> <span class=\"sql-docs-inline-code\">drop database temp cascade;</span> -- Earlier releases:<br/>drop table temp.t3;<br/>drop database temp;<br/></div><p id=\"../Impala/docs/topics/impala_create_database.xml_related_info\"><b>Related information:</b> </p> <p><a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_databases.xml#databases\">Overview of Impala Databases</a>, <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_drop_database.xml#drop_database\">DROP DATABASE Statement</a>,\n      <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_use.xml#use\">USE Statement</a>, <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_show.xml#show_databases\"><h4>SHOW DATABASES</h4> </a>,\n      <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_tables.xml#tables\">Overview of Impala Tables</a></p> </div> ","title":"CREATE DATABASE Statement"}