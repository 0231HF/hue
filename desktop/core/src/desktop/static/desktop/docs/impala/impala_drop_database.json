{"body":"<div><p>\n      Removes a database from the system. The physical operations involve removing the metadata for the database\n      from the metastore, and deleting the corresponding <span class=\"sql-docs-inline-code\">*.db</span> directory from HDFS.\n    </p><p id=\"../Impala/docs/topics/impala_drop_database.xml_syntax_blurb\"><b>Syntax:</b></p><div class=\"sql-docs-code-block\">DROP (DATABASE|SCHEMA) [IF EXISTS] <span class=\"sql-docs-variable\">database_name</span><span class=\"sql-docs-inline-code\">[RESTRICT | CASCADE]</span>;</div><p id=\"../Impala/docs/topics/impala_drop_database.xml_ddl_blurb\"><b>Statement type:</b> DDL\n      </p><p id=\"../Impala/docs/topics/impala_drop_database.xml_usage_notes_blurb\"><b>Usage notes:</b></p><p>\n      By default, the database must be empty before it can be dropped, to avoid losing any data.\n    </p><p>\n      In Impala 2.3 and higher, you can include the <span class=\"sql-docs-inline-code\">CASCADE</span>\n      clause to make Impala drop all tables and other objects in the database before dropping the database itself.\n      The <span class=\"sql-docs-inline-code\">RESTRICT</span> clause enforces the original requirement that the database be empty\n      before being dropped. Because the <span class=\"sql-docs-inline-code\">RESTRICT</span> behavior is still the default, this\n      clause is optional.\n    </p><p>\n      The automatic dropping resulting from the <span class=\"sql-docs-inline-code\">CASCADE</span> clause follows the same rules as the\n      corresponding <span class=\"sql-docs-inline-code\">DROP TABLE</span>, <span class=\"sql-docs-inline-code\">DROP VIEW</span>, and <span class=\"sql-docs-inline-code\">DROP FUNCTION</span> statements.\n      In particular, the HDFS directories and data files for any external tables are left behind when the\n      tables are removed.\n    </p><p>\n      When you do not use the <span class=\"sql-docs-inline-code\">CASCADE</span> clause, drop or move all the objects inside the database manually\n      before dropping the database itself:\n    </p><ul><li><p>\n          Use the <span class=\"sql-docs-inline-code\">SHOW TABLES</span> statement to locate all tables and views in the database,\n          and issue <span class=\"sql-docs-inline-code\">DROP TABLE</span> and <span class=\"sql-docs-inline-code\">DROP VIEW</span> statements to remove them all.\n        </p></li><li><p>\n          Use the <span class=\"sql-docs-inline-code\">SHOW FUNCTIONS</span> and <span class=\"sql-docs-inline-code\">SHOW AGGREGATE FUNCTIONS</span> statements\n          to locate all user-defined functions in the database, and issue <span class=\"sql-docs-inline-code\">DROP FUNCTION</span>\n          and <span class=\"sql-docs-inline-code\">DROP AGGREGATE FUNCTION</span> statements to remove them all.\n        </p></li><li><p>\n          To keep tables or views contained by a database while removing the database itself, use\n          <span class=\"sql-docs-inline-code\">ALTER TABLE</span> and <span class=\"sql-docs-inline-code\">ALTER VIEW</span> to move the relevant\n          objects to a different database before dropping the original database.\n        </p></li></ul><p>\n      You cannot drop the current database, that is, the database your session connected to\n      either through the <span class=\"sql-docs-inline-code\">USE</span> statement or the <span class=\"sql-docs-inline-code\">-d</span> option of <span class=\"sql-docs-inline-code\">impala-shell</span>.\n      Issue a <span class=\"sql-docs-inline-code\">USE</span> statement to switch to a different database first.\n      Because the <span class=\"sql-docs-inline-code\">default</span> database is always available, issuing\n      <span class=\"sql-docs-inline-code\">USE default</span> is a convenient way to leave the current database\n      before dropping it.\n    </p><p id=\"../Impala/docs/topics/impala_drop_database.xml_hive_blurb\"><b>Hive considerations:</b></p><p>\n      When you drop a database in Impala, the database can no longer be used by Hive.\n    </p><p id=\"../Impala/docs/topics/impala_drop_database.xml_example_blurb\"><b>Examples:</b></p><p>\n      See <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_create_database.xml#create_database\">CREATE DATABASE Statement</a> for examples covering <span class=\"sql-docs-inline-code\">CREATE\n      DATABASE</span>, <span class=\"sql-docs-inline-code\">USE</span>, and <span class=\"sql-docs-inline-code\">DROP DATABASE</span>.\n    </p><p id=\"../Impala/docs/topics/impala_drop_database.xml_s3_blurb\"><b>Amazon S3 considerations:</b></p><p id=\"../Impala/docs/topics/impala_drop_database.xml_s3_ddl\">\n        In Impala 2.6 and higher, Impala DDL statements such as\n        <span class=\"sql-docs-inline-code\">CREATE DATABASE</span>, <span class=\"sql-docs-inline-code\">CREATE TABLE</span>, <span class=\"sql-docs-inline-code\">DROP DATABASE CASCADE</span>,\n        <span class=\"sql-docs-inline-code\">DROP TABLE</span>, and <span class=\"sql-docs-inline-code\">ALTER TABLE [ADD|DROP] PARTITION</span> can create or remove folders\n        as needed in the Amazon S3 system. Prior to Impala 2.6, you had to create folders yourself and point\n        Impala database, tables, or partitions at them, and manually remove folders when no longer needed.\n        See <span>s3</span> for details about reading and writing S3 data with Impala.\n      </p><p id=\"../Impala/docs/topics/impala_drop_database.xml_cancel_blurb_no\"><b>Cancellation:</b> Cannot be cancelled.\n      </p><p id=\"../Impala/docs/topics/impala_drop_database.xml_permissions_blurb\"><b>HDFS permissions:</b></p><p>\n      The user ID that the <span class=\"sql-docs-inline-code\">impalad</span> daemon runs under,\n      typically the <span class=\"sql-docs-inline-code\">impala</span> user, must have write\n      permission for the directory associated with the database.\n    </p><p id=\"../Impala/docs/topics/impala_drop_database.xml_example_blurb\"><b>Examples:</b></p><div id=\"../Impala/docs/topics/impala_drop_database.xml_create_drop_db_example\" class=\"sql-docs-code-block\">create database first_db;<br/>use first_db;<br/>create table t1 (x int);<br/><br/>create database second_db;<br/>use second_db;<br/>-- Each database has its own namespace for tables.<br/>-- You can reuse the same table names in each database.<br/>create table t1 (s string);<br/><br/>create database temp;<br/><br/>-- You can either USE a database after creating it,<br/>-- or qualify all references to the table name with the name of the database.<br/>-- Here, tables T2 and T3 are both created in the TEMP database.<br/><br/>create table temp.t2 (x int, y int);<br/>use database temp;<br/>create table t3 (s string);<br/><br/>-- You cannot drop a database while it is selected by the USE statement.<br/>drop database temp;<br/><i>ERROR: AnalysisException: Cannot drop current default database: temp</i><br/><br/>-- The always-available database 'default' is a convenient one to USE<br/>-- before dropping a database you created.<br/>use default;<br/><br/>-- Before dropping a database, first drop all the tables inside it,<br/><span class=\"sql-docs-inline-code\">-- or in Impala 2.3 and higher use the CASCADE clause.</span><br/>drop database temp;<br/>ERROR: ImpalaRuntimeException: Error making 'dropDatabase' RPC to Hive Metastore:<br/>CAUSED BY: InvalidOperationException: Database temp is not empty<br/>show tables in temp;<br/>+------+<br/>| name |<br/>+------+<br/>| t3   |<br/>+------+<br/><br/><span class=\"sql-docs-inline-code\">-- Impala 2.3 and higher:</span><span class=\"sql-docs-inline-code\">drop database temp cascade;</span><br/><br/>-- Earlier releases:<br/>drop table temp.t3;<br/>drop database temp;<br/></div><p id=\"../Impala/docs/topics/impala_drop_database.xml_related_info\"><b>Related information:</b></p><p><a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_databases.xml#databases\">Overview of Impala Databases</a>, <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_create_database.xml#create_database\">CREATE DATABASE Statement</a>,\n      <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_use.xml#use\">USE Statement</a>, <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_show.xml#show_databases\"><h4>SHOW DATABASES</h4></a>, <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_drop_table.xml#drop_table\">DROP TABLE Statement</a></p></div>","title":"DROP DATABASE Statement"}