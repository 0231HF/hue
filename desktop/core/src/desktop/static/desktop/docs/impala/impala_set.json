{"body":"<div><p>\n      Specifies values for query options that control the runtime behavior of other statements within the same\n      session.\n    </p><p>\n      In Impala 2.5 and higher, <span class=\"sql-docs-inline-code\">SET</span> also defines user-specified substitution variables for\n      the <span class=\"sql-docs-inline-code\">impala-shell</span> interpreter. This feature uses the <span class=\"sql-docs-inline-code\">SET</span> command\n      built into <span class=\"sql-docs-inline-code\">impala-shell</span> instead of the SQL <span class=\"sql-docs-inline-code\">SET</span> statement.\n      Therefore the substitution mechanism only works with queries processed by <span class=\"sql-docs-inline-code\">impala-shell</span>,\n      not with queries submitted through JDBC or ODBC.\n    </p><div class=\"sql-docs-note\"><p>\n        In Impala 2.11 and higher, the output of the <span class=\"sql-docs-inline-code\">SET</span>\n        statement changes in some important ways:\n      </p><ul><li><p>\n            The options are divided into groups: <span class=\"sql-docs-inline-code\">Regular Query Options</span>,\n            <span class=\"sql-docs-inline-code\">Advanced Query Options</span>, <span class=\"sql-docs-inline-code\">Development Query Options</span>, and\n            <span class=\"sql-docs-inline-code\">Deprecated Query Options</span>.\n          </p></li><li><p>\n            The advanced options are intended for use in specific\n            kinds of performance tuning and debugging scenarios. The development options are\n            related to internal development of Impala or features that are not yet finalized;\n            these options might be changed or removed without notice.\n            The deprecated options are related to features that are removed or changed so that\n            the options no longer have any purpose; these options might be removed in future\n            versions.\n          </p></li><li><p>\n            By default, only the first two groups (regular and advanced) are\n            displayed by the <span class=\"sql-docs-inline-code\">SET</span> command. Use the syntax <span class=\"sql-docs-inline-code\">SET ALL</span>\n            to see all groups of options.\n          </p></li><li><p><span class=\"sql-docs-inline-code\">impala-shell</span> options and user-specified variables are always displayed\n            at the end of the list of query options, after all appropriate option groups.\n          </p></li><li><p>\n            When the <span class=\"sql-docs-inline-code\">SET</span> command is run through the JDBC or ODBC interfaces,\n            the result set has a new third column, <span class=\"sql-docs-inline-code\">level</span>, indicating which\n            group each option belongs to. The same distinction of <span class=\"sql-docs-inline-code\">SET</span>\n            returning the regular and advanced options, and <span class=\"sql-docs-inline-code\">SET ALL</span>\n            returning all option groups, applies to JDBC and ODBC also.\n          </p></li></ul></div><p id=\"../Impala/docs/topics/impala_set.xml_syntax_blurb\"><b>Syntax:</b></p><div class=\"sql-docs-code-block\">SET [<span class=\"sql-docs-variable\">query_option</span>=<span class=\"sql-docs-variable\">option_value</span>]<br/><span class=\"sql-docs-inline-code\">SET ALL</span></div><p><span class=\"sql-docs-inline-code\">SET</span> and <span class=\"sql-docs-inline-code\">SET ALL</span> with no arguments return a\n      result set consisting of all the applicable query options and their current values.\n    </p><p>\n      The query option name and any string argument values are case-insensitive.\n    </p><p>\n      Each query option has a specific allowed notation for its arguments. Boolean options can be enabled and\n      disabled by assigning values of either <span class=\"sql-docs-inline-code\">true</span> and <span class=\"sql-docs-inline-code\">false</span>, or\n      <span class=\"sql-docs-inline-code\">1</span> and <span class=\"sql-docs-inline-code\">0</span>. Some numeric options accept a final character signifying the unit,\n      such as <span class=\"sql-docs-inline-code\">2g</span> for 2 gigabytes or <span class=\"sql-docs-inline-code\">100m</span> for 100 megabytes. See\n      <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_query_options.xml#query_options\">Query Options for the SET Statement</a> for the details of each query option.\n    </p><p><b>Setting query options during impala-shell invocation:</b></p><p>\n      In Impala 2.11 and higher, you can use one or more command-line options\n      of the form <span class=\"sql-docs-inline-code\">--query_option=<span class=\"sql-docs-variable\">option</span>=<span class=\"sql-docs-variable\">value</span></span>\n      when running the <span class=\"sql-docs-inline-code\">impala-shell</span> command. The corresponding query option settings\n      take effect for that <span class=\"sql-docs-inline-code\">impala-shell</span> session.\n    </p><p><b>User-specified substitution variables:</b></p><p>\n      In Impala 2.5 and higher, you can specify your own names and string substitution values\n      within the <span class=\"sql-docs-inline-code\">impala-shell</span> interpreter. Once a substitution variable is set up,\n      its value is inserted into any SQL statement in that same <span class=\"sql-docs-inline-code\">impala-shell</span> session\n      that contains the notation <span class=\"sql-docs-inline-code\">${var:<span class=\"sql-docs-variable\">varname</span>}</span>.\n      Using <span class=\"sql-docs-inline-code\">SET</span> in an interactive <span class=\"sql-docs-inline-code\">impala-shell</span> session overrides\n      any value for that same variable passed in through the <span class=\"sql-docs-inline-code\">--var=<span class=\"sql-docs-variable\">varname</span>=<span class=\"sql-docs-variable\">value</span></span>\n      command-line option.\n    </p><p>\n      For example, to set up some default parameters for report queries, but then override those default\n      within an <span class=\"sql-docs-inline-code\">impala-shell</span> session, you might issue commands and statements such as\n      the following:\n    </p><div class=\"sql-docs-code-block\"><br/>-- Initial setup for this example.<br/>create table staging_table (s string);<br/>insert into staging_table values ('foo'), ('bar'), ('bletch');<br/><br/>create table production_table (s string);<br/>insert into production_table values ('North America'), ('EMEA'), ('Asia');<br/>quit;<br/><br/>-- Start impala-shell with user-specified substitution variables,<br/>-- run a query, then override the variables with SET and run the query again.<br/>$ impala-shell --var=table_name=staging_table --var=cutoff=2<br/>... <span class=\"sql-docs-variable\">banner message</span> ...<br/>[localhost:21000] > select s from ${var:table_name} order by s limit ${var:cutoff};<br/>Query: select s from staging_table order by s limit 2<br/>+--------+<br/>| s      |<br/>+--------+<br/>| bar    |<br/>| bletch |<br/>+--------+<br/>Fetched 2 row(s) in 1.06s<br/><br/>[localhost:21000] > set var:table_name=production_table;<br/>Variable TABLE_NAME set to production_table<br/>[localhost:21000] > set var:cutoff=3;<br/>Variable CUTOFF set to 3<br/><br/>[localhost:21000] > select s from ${var:table_name} order by s limit ${var:cutoff};<br/>Query: select s from production_table order by s limit 3<br/>+---------------+<br/>| s             |<br/>+---------------+<br/>| Asia          |<br/>| EMEA          |<br/>| North America |<br/>+---------------+<br/></div><p>\n      The following example shows how <span class=\"sql-docs-inline-code\">SET ALL</span> with no parameters displays\n      all user-specified substitution variables, and how <span class=\"sql-docs-inline-code\">UNSET</span> removes\n      the substitution variable entirely:\n    </p><div class=\"sql-docs-code-block\"><br/>[localhost:21000] > set all;<br/>Query options (defaults shown in []):<br/>ABORT_ON_ERROR: [0]<br/>COMPRESSION_CODEC: []<br/>DISABLE_CODEGEN: [0]<br/>...<br/><br/>Advanced Query Options:<br/>APPX_COUNT_DISTINCT: [0]<br/>BUFFER_POOL_LIMIT: []<br/>DEFAULT_JOIN_DISTRIBUTION_MODE: [0]<br/>...<br/><br/>Development Query Options:<br/>BATCH_SIZE: [0]<br/>DEBUG_ACTION: []<br/>DECIMAL_V2: [0]<br/>...<br/><br/>Deprecated Query Options:<br/>ABORT_ON_DEFAULT_LIMIT_EXCEEDED: [0]<br/>ALLOW_UNSUPPORTED_FORMATS: [0]<br/>DEFAULT_ORDER_BY_LIMIT: [-1]<br/>...<br/><br/>Shell Options<br/>  LIVE_PROGRESS: False<br/>  LIVE_SUMMARY: False<br/><br/>Variables:<br/>  CUTOFF: 3<br/>  TABLE_NAME: staging_table<br/><br/>[localhost:21000] > unset var:cutoff;<br/>Unsetting variable CUTOFF<br/>[localhost:21000] > select s from ${var:table_name} order by s limit ${var:cutoff};<br/>Error: Unknown variable CUTOFF<br/></div><p>\n      See <span>impala shell running commands</span> for more examples of using the\n      <span class=\"sql-docs-inline-code\">--var</span>, <span class=\"sql-docs-inline-code\">SET</span>, and <span class=\"sql-docs-inline-code\">${var:<span class=\"sql-docs-variable\">varname</span>}</span>\n      substitution technique in <span class=\"sql-docs-inline-code\">impala-shell</span>.\n    </p><p id=\"../Impala/docs/topics/impala_set.xml_usage_notes_blurb\"><b>Usage notes:</b></p><p><span class=\"sql-docs-inline-code\">MEM_LIMIT</span> is probably the most commonly used query option. You can specify a high value to\n      allow a resource-intensive query to complete. For testing how queries would work on memory-constrained\n      systems, you might specify an artificially low value.\n    </p><p id=\"../Impala/docs/topics/impala_set.xml_complex_types_blurb\"><b>Complex type considerations:</b></p><p id=\"../Impala/docs/topics/impala_set.xml_example_blurb\"><b>Examples:</b></p><p>\n      The following example sets some numeric and some Boolean query options to control usage of memory, disk\n      space, and timeout periods, then runs a query whose success could depend on the options in effect:\n    </p><div class=\"sql-docs-code-block\">set mem_limit=64g;<br/>set DISABLE_UNSAFE_SPILLS=true;<br/>set parquet_file_size=400m;<br/>set RESERVATION_REQUEST_TIMEOUT=900000;<br/>insert overwrite parquet_table select c1, c2, count(c3) from text_table group by c1, c2, c3;<br/></div><p id=\"../Impala/docs/topics/impala_set.xml_added_in_20\"><b>Added in:</b>Impala 2.0.0</p><p><span class=\"sql-docs-inline-code\">SET</span> has always been available as an <span class=\"sql-docs-inline-code\">impala-shell</span> command. Promoting it to\n      a SQL statement lets you use this feature in client applications through the JDBC and ODBC APIs.\n    </p><p id=\"../Impala/docs/topics/impala_set.xml_cancel_blurb_no\"><b>Cancellation:</b> Cannot be cancelled.\n      </p><p id=\"../Impala/docs/topics/impala_set.xml_permissions_blurb_no\"><b>HDFS permissions:</b> This statement does not touch any HDFS files or directories,\n        therefore no HDFS permissions are required.\n      </p><p id=\"../Impala/docs/topics/impala_set.xml_related_info\"><b>Related information:</b></p><p>\n      See <a href=\"javascript: void(0);\" class=\"lang-ref-link\" data-target=\"topics/impala_query_options.xml#query_options\">Query Options for the SET Statement</a> for the query options you can adjust using this\n      statement.\n    </p></div>","title":"SET Statement"}